{{- /* Ultra-Zen VPN Connection */ -}}
function vpn-connect --description "Connect to Goose VPN via systemd service"
    # Semantic: Establish secure tunnel through vault-authenticated gateway

    set -l vpn_name "GooseVPN"

    # Check if already connected
    if sudo systemctl is-active --quiet goosevpn.service
        echo "‚úì Already connected to VPN"
        return 0
    end

    echo "üîê Connecting to $vpn_name..."

    # Start system service (requires sudo)
    sudo systemctl start goosevpn.service

    if test $status -eq 0
        # Wait a moment for connection to establish
        sleep 2
        if sudo systemctl is-active --quiet goosevpn.service
            echo "‚úì Connected to $vpn_name"
        else
            echo "‚úó Service started but connection failed"
            sudo systemctl status goosevpn.service
            return 1
        end
    else
        echo "‚úó Failed to start $vpn_name service"
        return 1
    end
end