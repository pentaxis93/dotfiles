{{- $theme := .themes.kanagawa.dragon -}}
{{- $s := .semantic -}}
/* ════════════════════════════════════════════════════════════════════════════
   Zen Browser - Kanagawa Dragon Theme (userChrome.css)
   Generated by chezmoi from userChrome.css.tmpl

   Philosophy: "Do not define colors; define intentions. Let the intention
   manifest as color."

   This theme applies the complete Kanagawa Dragon color palette using our
   semantic color system to every UI element in Zen Browser.
   ════════════════════════════════════════════════════════════════════════════ */

/* ────────────────────────────────────────────────────────────────────────────
   SEMANTIC COLOR VARIABLES
   Single source of truth for all colors - from colors.yaml
   ──────────────────────────────────────────────────────────────────────────── */

:root {
  /* ═══ Surface Colors ═══ */
  --zen-bg-primary: {{ template "color-hex.tmpl" (index $theme $s.surface.primary) }} !important;
  --zen-bg-secondary: {{ template "color-hex.tmpl" (index $theme $s.surface.subtle) }} !important;
  --zen-bg-elevated: {{ template "color-hex.tmpl" (index $theme $s.surface.elevated) }} !important;
  --zen-bg-overlay: {{ template "color-hex.tmpl" (index $theme $s.surface.overlay) }} !important;

  /* ═══ Text Colors ═══ */
  --zen-fg-primary: {{ template "color-hex.tmpl" (index $theme $s.text.primary) }} !important;
  --zen-fg-secondary: {{ template "color-hex.tmpl" (index $theme $s.text.secondary) }} !important;
  --zen-fg-disabled: {{ template "color-hex.tmpl" (index $theme $s.text.disabled) }} !important;

  /* ═══ State Colors ═══ */
  --zen-success: {{ template "color-hex.tmpl" (index $theme $s.state.success) }} !important;
  --zen-warning: {{ template "color-hex.tmpl" (index $theme $s.state.warning) }} !important;
  --zen-error: {{ template "color-hex.tmpl" (index $theme $s.state.error) }} !important;
  --zen-info: {{ template "color-hex.tmpl" (index $theme $s.state.info) }} !important;

  /* ═══ Interactive Colors ═══ */
  --zen-accent-primary: {{ template "color-hex.tmpl" (index $theme $s.state.success) }} !important;
  --zen-accent-secondary: {{ template "color-hex.tmpl" (index $theme $s.state.info) }} !important;
  --zen-focus: {{ template "color-hex.tmpl" (index $theme $s.interactive.focus) }} !important;
  --zen-hover: {{ template "color-hex.tmpl" (index $theme $s.interactive.hover_background) }} !important;
  --zen-active: {{ template "color-hex.tmpl" (index $theme $s.interactive.active) }} !important;

  /* ═══ Border Colors ═══ */
  --zen-border-default: {{ template "color-hex.tmpl" (index $theme $s.border.default) }} !important;
  --zen-border-focus: {{ template "color-hex.tmpl" (index $theme $s.border.focus) }} !important;
  --zen-border-subtle: {{ template "color-hex.tmpl" (index $theme $s.border.subtle) }} !important;

  /* ═══ Selection Colors ═══ */
  --zen-selection-bg: {{ template "color-hex.tmpl" (index $theme $s.selection.background) }} !important;
  --zen-selection-fg: {{ template "color-hex.tmpl" (index $theme $s.selection.foreground) }} !important;

  /* ═══ Shadow ═══ */
  --zen-shadow: {{ template "color-rgba.tmpl" (dict "color" (index $theme "shadow") "alpha" "0.3") }} !important;
}

/* ────────────────────────────────────────────────────────────────────────────
   BROWSER CHROME - Main Window Background
   ──────────────────────────────────────────────────────────────────────────── */

#main-window,
#navigator-toolbox {
  background-color: var(--zen-bg-primary) !important;
}

/* ────────────────────────────────────────────────────────────────────────────
   TOOLBAR - URL Bar and Navigation
   ──────────────────────────────────────────────────────────────────────────── */

#nav-bar,
#PersonalToolbar,
toolbar {
  background-color: var(--zen-bg-secondary) !important;
  border-bottom: 1px solid var(--zen-border-subtle) !important;
}

/* URL Bar */
#urlbar,
#urlbar-background,
#urlbar-input-container {
  background-color: var(--zen-bg-elevated) !important;
  border: 1px solid var(--zen-border-default) !important;
  color: var(--zen-fg-primary) !important;
}

#urlbar:focus-within,
#urlbar[focused="true"] {
  border-color: var(--zen-border-focus) !important;
  box-shadow: 0 0 0 1px var(--zen-border-focus) !important;
}

/* URL Bar Placeholder */
#urlbar-input::placeholder {
  color: var(--zen-fg-secondary) !important;
}

/* ────────────────────────────────────────────────────────────────────────────
   TABS - Vertical Tab Sidebar
   ──────────────────────────────────────────────────────────────────────────── */

/* Sidebar Background */
#zen-sidebar-panels-wrapper,
#sidebar-main,
#tabbrowser-tabs {
  background-color: var(--zen-bg-secondary) !important;
}

/* Individual Tab */
.tabbrowser-tab {
  background-color: transparent !important;
  color: var(--zen-fg-secondary) !important;
  border-left: 3px solid transparent !important;
  margin: 2px 4px !important;
  border-radius: 4px !important;
}

/* Active Tab */
.tabbrowser-tab[selected="true"] {
  background-color: var(--zen-bg-elevated) !important;
  color: var(--zen-fg-primary) !important;
  border-left-color: var(--zen-accent-primary) !important;
  font-weight: 500 !important;
}

/* Hover Tab */
.tabbrowser-tab:hover:not([selected="true"]) {
  background-color: var(--zen-hover) !important;
  color: var(--zen-fg-primary) !important;
}

/* Pinned Tabs */
.tabbrowser-tab[pinned="true"] {
  border-left-color: var(--zen-accent-secondary) !important;
}

/* Tab Close Button */
.tab-close-button {
  color: var(--zen-fg-secondary) !important;
}

.tab-close-button:hover {
  background-color: var(--zen-error) !important;
  color: var(--zen-bg-primary) !important;
  border-radius: 3px !important;
}

/* New Tab Button */
#tabs-newtab-button,
.zen-vertical-newtab-button {
  background-color: transparent !important;
  color: var(--zen-accent-primary) !important;
}

#tabs-newtab-button:hover,
.zen-vertical-newtab-button:hover {
  background-color: var(--zen-hover) !important;
}

/* ────────────────────────────────────────────────────────────────────────────
   WORKSPACES - Workspace Indicators
   ──────────────────────────────────────────────────────────────────────────── */

.zen-workspace-item {
  background-color: var(--zen-bg-elevated) !important;
  color: var(--zen-fg-secondary) !important;
  border: 1px solid var(--zen-border-default) !important;
  border-radius: 4px !important;
}

.zen-workspace-item[selected="true"] {
  background-color: var(--zen-accent-primary) !important;
  color: var(--zen-bg-primary) !important;
  border-color: var(--zen-accent-primary) !important;
}

.zen-workspace-item:hover:not([selected="true"]) {
  background-color: var(--zen-hover) !important;
  border-color: var(--zen-border-focus) !important;
}

/* ────────────────────────────────────────────────────────────────────────────
   DROPDOWN MENUS & POPUPS
   ──────────────────────────────────────────────────────────────────────────── */

menupopup,
panel,
.panel-subview-body {
  background-color: var(--zen-bg-overlay) !important;
  border: 1px solid var(--zen-border-default) !important;
  box-shadow: 0 4px 12px var(--zen-shadow) !important;
  color: var(--zen-fg-primary) !important;
}

menuitem,
toolbarbutton {
  color: var(--zen-fg-primary) !important;
}

menuitem:hover,
menuitem[_moz-menuactive="true"],
toolbarbutton:hover {
  background-color: var(--zen-hover) !important;
  color: var(--zen-fg-primary) !important;
}

menuitem[disabled="true"],
toolbarbutton[disabled="true"] {
  color: var(--zen-fg-disabled) !important;
}

menuseparator {
  border-color: var(--zen-border-subtle) !important;
}

/* ────────────────────────────────────────────────────────────────────────────
   CONTEXT MENUS
   ──────────────────────────────────────────────────────────────────────────── */

#contentAreaContextMenu,
#placesContext,
#toolbar-context-menu {
  background-color: var(--zen-bg-overlay) !important;
  border: 1px solid var(--zen-border-default) !important;
  box-shadow: 0 4px 12px var(--zen-shadow) !important;
}

/* ────────────────────────────────────────────────────────────────────────────
   SIDEBAR - Bookmarks, History, Synced Tabs
   ──────────────────────────────────────────────────────────────────────────── */

#sidebar-box,
#sidebar-header {
  background-color: var(--zen-bg-secondary) !important;
  border-right: 1px solid var(--zen-border-subtle) !important;
}

#sidebar-title {
  color: var(--zen-fg-primary) !important;
}

#sidebar-splitter {
  background-color: var(--zen-border-subtle) !important;
  border: none !important;
}

/* ────────────────────────────────────────────────────────────────────────────
   FINDBAR - Search in Page
   ──────────────────────────────────────────────────────────────────────────── */

.browserContainer > findbar {
  background-color: var(--zen-bg-secondary) !important;
  border-top: 1px solid var(--zen-border-default) !important;
  color: var(--zen-fg-primary) !important;
}

.findbar-textbox {
  background-color: var(--zen-bg-elevated) !important;
  border: 1px solid var(--zen-border-default) !important;
  color: var(--zen-fg-primary) !important;
}

.findbar-textbox:focus {
  border-color: var(--zen-border-focus) !important;
  box-shadow: 0 0 0 1px var(--zen-border-focus) !important;
}

/* ────────────────────────────────────────────────────────────────────────────
   NOTIFICATION BOX - Permissions, Updates, etc.
   ──────────────────────────────────────────────────────────────────────────── */

notification,
.notificationbox-stack {
  background-color: var(--zen-bg-overlay) !important;
  border: 1px solid var(--zen-border-default) !important;
  color: var(--zen-fg-primary) !important;
}

notification[value="addon-install-blocked"],
notification[value="addon-install-failed"],
notification[value="addon-install-confirmation"] {
  border-left: 4px solid var(--zen-warning) !important;
}

/* ────────────────────────────────────────────────────────────────────────────
   BUTTONS
   ──────────────────────────────────────────────────────────────────────────── */

button,
toolbarbutton,
.button-link {
  background-color: var(--zen-bg-elevated) !important;
  border: 1px solid var(--zen-border-default) !important;
  color: var(--zen-fg-primary) !important;
}

button:hover,
toolbarbutton:hover {
  background-color: var(--zen-hover) !important;
  border-color: var(--zen-border-focus) !important;
}

button:active,
toolbarbutton[open="true"] {
  background-color: var(--zen-active) !important;
}

button[default="true"],
button[type="primary"] {
  background-color: var(--zen-accent-primary) !important;
  border-color: var(--zen-accent-primary) !important;
  color: var(--zen-bg-primary) !important;
}

button[default="true"]:hover,
button[type="primary"]:hover {
  background-color: var(--zen-success) !important;
  opacity: 0.9 !important;
}

/* ────────────────────────────────────────────────────────────────────────────
   INPUT FIELDS
   ──────────────────────────────────────────────────────────────────────────── */

input,
textarea,
select {
  background-color: var(--zen-bg-elevated) !important;
  border: 1px solid var(--zen-border-default) !important;
  color: var(--zen-fg-primary) !important;
}

input:focus,
textarea:focus,
select:focus {
  border-color: var(--zen-border-focus) !important;
  box-shadow: 0 0 0 1px var(--zen-border-focus) !important;
}

input::placeholder,
textarea::placeholder {
  color: var(--zen-fg-secondary) !important;
}

/* ────────────────────────────────────────────────────────────────────────────
   SCROLLBARS
   ──────────────────────────────────────────────────────────────────────────── */

scrollbar {
  background-color: var(--zen-bg-secondary) !important;
}

scrollbar thumb {
  background-color: var(--zen-border-default) !important;
  border-radius: 4px !important;
}

scrollbar thumb:hover {
  background-color: var(--zen-fg-secondary) !important;
}

/* ────────────────────────────────────────────────────────────────────────────
   DOWNLOADS PANEL
   ──────────────────────────────────────────────────────────────────────────── */

#downloadsPanel,
#downloadsListBox {
  background-color: var(--zen-bg-overlay) !important;
  border: 1px solid var(--zen-border-default) !important;
}

.downloadButton {
  background-color: var(--zen-bg-elevated) !important;
  color: var(--zen-fg-primary) !important;
}

.downloadButton:hover {
  background-color: var(--zen-hover) !important;
}

/* ────────────────────────────────────────────────────────────────────────────
   SPLIT VIEW - Tiling Window Manager
   ──────────────────────────────────────────────────────────────────────────── */

.zen-split-view-separator {
  background-color: var(--zen-border-default) !important;
}

.zen-split-view-handle {
  background-color: var(--zen-accent-primary) !important;
}

.zen-split-view-handle:hover {
  background-color: var(--zen-success) !important;
}

/* ────────────────────────────────────────────────────────────────────────────
   COMPACT MODE - Collapsed Sidebar
   ──────────────────────────────────────────────────────────────────────────── */

#zen-sidebar-panels-wrapper[compact="true"] {
  background-color: var(--zen-bg-primary) !important;
  border-right: 1px solid var(--zen-border-subtle) !important;
}

/* ────────────────────────────────────────────────────────────────────────────
   TOOLTIPS
   ──────────────────────────────────────────────────────────────────────────── */

tooltip {
  background-color: var(--zen-bg-overlay) !important;
  border: 1px solid var(--zen-border-default) !important;
  color: var(--zen-fg-primary) !important;
  box-shadow: 0 2px 8px var(--zen-shadow) !important;
}

/* ────────────────────────────────────────────────────────────────────────────
   STATUS PANELS - Hover link preview
   ──────────────────────────────────────────────────────────────────────────── */

#statuspanel {
  background-color: var(--zen-bg-overlay) !important;
  border: 1px solid var(--zen-border-default) !important;
  color: var(--zen-fg-primary) !important;
}

/* ────────────────────────────────────────────────────────────────────────────
   READER MODE
   ──────────────────────────────────────────────────────────────────────────── */

.reader-toolbar {
  background-color: var(--zen-bg-secondary) !important;
  border-bottom: 1px solid var(--zen-border-subtle) !important;
}

/* ────────────────────────────────────────────────────────────────────────────
   PICTURE-IN-PICTURE
   ──────────────────────────────────────────────────────────────────────────── */

#PictureInPictureToggle {
  background-color: var(--zen-bg-overlay) !important;
  border: 1px solid var(--zen-border-default) !important;
}

/* ────────────────────────────────────────────────────────────────────────────
   GLANCE - Tab Preview
   ──────────────────────────────────────────────────────────────────────────── */

.zen-glance-container {
  background-color: var(--zen-bg-overlay) !important;
  border: 1px solid var(--zen-border-default) !important;
  box-shadow: 0 8px 24px var(--zen-shadow) !important;
}

/* ────────────────────────────────────────────────────────────────────────────
   MEDIA CONTROLS
   ──────────────────────────────────────────────────────────────────────────── */

.zen-media-controls {
  background-color: var(--zen-bg-overlay) !important;
  border: 1px solid var(--zen-border-default) !important;
}

.zen-media-controls-button {
  color: var(--zen-fg-primary) !important;
}

.zen-media-controls-button:hover {
  background-color: var(--zen-hover) !important;
}

/* ════════════════════════════════════════════════════════════════════════════
   END OF KANAGAWA DRAGON THEME

   "Do not paint the water to make the fish visible.
    Let the fish and water exchange places."

   - The Master's wisdom on reverse video selections
   ════════════════════════════════════════════════════════════════════════════ */
